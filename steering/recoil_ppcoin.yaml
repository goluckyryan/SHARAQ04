aliases:
  - &beamZ      0.
  - &tofShift_L 0.
  - &tofShift_R 0.
#============== PROCESSORS     =============================
Processor:
  - name: smwdc_geometry
    type: art::TParameterLoader
    parameter:
      Name:     SMWDC_geometry
      Type:     art::sh04::TDetectorGeometry
      FileName: prm/kinematics/geometry.yaml

  - name: proc_beamz
    type: art::sh04::TBeamZProcessor
    parameter:
      TrackL:             smwdc_L
      TrackR:             smwdc_R
      Geometry:           SMWDC_geometry
      OutputCollection:   beamZ
      OutputTransparency: 0
                
  - name: tpla_tof
    type: art::sh04::TRecoilTOFProcessor
    parameter:
      OutputL:            tofL
      OutputR:            tofR
      OutputS0D:          tofS0D
      F3PlasticColName:   plaV775
      F3PlasticDetID:     2
      FH9PlasticColName:  plaV775
      FH9PlasticDetID:    3
      S0DPlasticColName:  plaV775
      S0DPlasticDetID:    4
      TPlasticColName:    plaV775
      TPlasticLDetID:     0
      TPlasticRDetID:     1
      BeamZ:              *beamZ
      ShiftL:             *tofShift_L
      ShiftR:             *tofShift_R
      OutputTransparency: 0

  - name: Recoil_L
    type: art::sh04::TRecoilProcessor
    parameter:
      OutputCollection: recoil_L
      TrackCollection:  smwdc_L
      TOFCollection:    tofL
      Geometry:         SMWDC_geometry
      Side:             0           # 0 = left, !0 = right
      BeamZ:            *beamZ
      UseReactionPointCollection:   0   # s0XY
      UseIncidentAngleCollection:   0   # s0AB
      UsePolarizedMagnetCollection: 0
      OutputTransparency:           1   #copied to p2p
        
  - name: Recoil_R
    type: art::sh04::TRecoilProcessor
    parameter:
      OutputCollection: recoil_R
      TrackCollection:  smwdc_R
      TOFCollection:    tofR
      Geometry:         SMWDC_geometry
      Side:             1
      BeamZ:            *beamZ
      UseReactionPointCollection:   0
      UseIncidentAngleCollection:   0
      UsePolarizedMagnetCollection: 0
      OutputTransparency:           1   #copied to p2p

  - name: proc_p2p
    type: art::sh04::TP2PKinematicsProcessor
    parameter:
      OutputCollection:   p2p
      RecoilL:            recoil_L
      RecoilR:            recoil_R
      PPACDetID:          0
      BeamParameter:      beam  # declare before and elsewhere
      OutputTransparency: 0
